--- !tapi-tbd-v2
archs:                 [ armv7, armv7s, arm64, arm64e ]
platform:              ios
flags:                 [ flat_namespace ]
install-name:          /System/Library/Messages/PlugIns/iMessage.imservice/iMessage
current-version:       1000
compatibility-version: 1
objc-constraint:       retain_release
exports:
  - archs:                [ armv7, armv7s, arm64, arm64e ]
    symbols:              [ _EngramControllerErrorDomain,
                            _IDSIncomingMessageDecryptedDataKey,
                            _IDSIncomingMessageOriginalEncryptionTypeKey,
                            _IDSIncomingMessagePushPayloadKey,
                            _IDSIncomingMessageShouldShowPeerErrorsKey,
                            _MessageiMessageDeliveryDefaultTimeoutTime,
                            _PeopleSetByAddingMyID,
                            _StickerRefreshUtilConfigureStickerToken,
                            _StickerRefreshUtilGetMMCSRefreshHeaders,
                            _URIsFromHandles, __ConvergeGroupParticipants,
                            __FindChat, __LastAddressedURIForChat,
                            __LastAddressedURIForChatLogMetricIfNeeded,
                            __UpdateLastAddressedHandle,
                            __iMessageDateFromTimeStamp,
                            _incrementParticipantVersionForChat,
                            _kDefaultIncomingGroupSize,
                            _setParticipantVersionForChat ]
undefineds:
  - archs:                [ armv7, armv7s, arm64, arm64e ]
    symbols:              [ _AttachmentsAutomationLogMilestone,
                            _AttachmentsAutomationLogMilestoneWithOptionFlags,
                            _CFArrayAppendValue, _CFDictionaryCreateMutable,
                            _CFDictionarySetValue,
                            _CFNotificationCenterAddObserver,
                            _CFNotificationCenterGetDarwinNotifyCenter,
                            _CFNotificationCenterPostNotification, _CFRelease,
                            _CMFBlockListIsItemBlocked, _CreateCMFItemFromString,
                            _FTAWDLogIMessageReceived,
                            _FTAWDLogIMessageSentWithConnectionType,
                            _FTErrorDomain, _IDSCopyIDForDevice,
                            _IDSCopyIDForEmailAddress, _IDSCopyIDForPhoneNumber,
                            _IDSCopyIDForTokenWithID, _IDSDefaultPairedDevice,
                            _IDSFailedMessageIDKey, _IDSFailedUUIDKey,
                            _IDSFailureReasonKey, _IDSGetUUIDData,
                            _IDSIncomingMessageEngramGroupKey,
                            _IDSMaxMessageTimeout, _IDSOriginalCommandKey,
                            _IDSRegistrationPropertyOptionallyReceiveTypingIndicator,
                            _IDSRegistrationPropertySupportsAcknowledgementsV1,
                            _IDSRegistrationPropertySupportsActivitySharing,
                            _IDSRegistrationPropertySupportsAnimojiV2,
                            _IDSRegistrationPropertySupportsAutoloopVideoV1,
                            _IDSRegistrationPropertySupportsChatAppsV1,
                            _IDSRegistrationPropertySupportsFullScreenMomentsV2,
                            _IDSRegistrationPropertySupportsFullScreenMomentsV3,
                            _IDSRegistrationPropertySupportsImpactEffectsV1,
                            _IDSRegistrationPropertySupportsInlineAttachments,
                            _IDSRegistrationPropertySupportsInvisibleInkV1,
                            _IDSRegistrationPropertySupportsKeepReceipts,
                            _IDSRegistrationPropertySupportsLocationSharing,
                            _IDSRegistrationPropertySupportsOriginalTimestampOrderingV1,
                            _IDSRegistrationPropertySupportsPhotosExtensionV1,
                            _IDSSendMessageOptionAlternateCallbackIdentifierKey,
                            _IDSSendMessageOptionCommandKey,
                            _IDSSendMessageOptionDataToEncryptKey,
                            _IDSSendMessageOptionDeliveryStatusContextKey,
                            _IDSSendMessageOptionEnforceRemoteTimeoutsKey,
                            _IDSSendMessageOptionFireAndForgetKey,
                            _IDSSendMessageOptionFromIDKey,
                            _IDSSendMessageOptionInterestingRegistrationPropertiesKey,
                            _IDSSendMessageOptionLocalDeliveryKey,
                            _IDSSendMessageOptionRequireAllRegistrationPropertiesKey,
                            _IDSSendMessageOptionRequireLackOfRegistrationPropertiesKey,
                            _IDSSendMessageOptionSkipPayloadCheckKey,
                            _IDSSendMessageOptionTimeoutKey,
                            _IDSSendMessageOptionTopLevelDictionaryKey,
                            _IDSSendMessageOptionUUIDKey,
                            _IDSSendMessageOptionWantsCertifiedDeliveryKey,
                            _IDSSendMessageOptionWantsDeliveryStatusKey,
                            _IDSSendMessageOptionWantsResponseKey,
                            _IDSServerBagFinishedLoadingNotification,
                            _IDSServiceNameiMessage,
                            _IDSServiceNameiMessageForBusiness,
                            _IMAreObjectsLogicallySame,
                            _IMBackgroundColorAttributeName,
                            _IMBalloonBundleIdentifierBusiness,
                            _IMBalloonExtensionIDWithSuffix,
                            _IMBalloonPluginIdentifierActivity,
                            _IMBalloonPluginIdentifierBusiness,
                            _IMBalloonPluginIdentifierDT,
                            _IMBalloonPluginIdentifierHandwriting,
                            _IMBalloonPluginIdentifierMessageExtension,
                            _IMBalloonPluginIdentifierPhotosExtension,
                            _IMBalloonPluginIdentifierRichLinks,
                            _IMBalloonPluginIdentifierSurf,
                            _IMBalloonPluginIdentifierSurfDeprecated,
                            _IMBaseWritingDirectionAttributeName,
                            _IMBoldAttributeName, _IMBreadcrumbCharacterString,
                            _IMBreadcrumbTextMarkerAttributeName,
                            _IMBreadcrumbTextOptionFlags,
                            _IMChatCanonicalIDSIDsForAddress,
                            _IMClientPreviewConstraints,
                            _IMCloudKitDefinesDomain,
                            _IMCloudKitLastDeviceActivityDate,
                            _IMCombinedPayloadDictionaryAttachmentsKey,
                            _IMCombinedPayloadDictionaryPayloadKey,
                            _IMCopyNormalizedAttributes,
                            _IMCopySafeNameOfFontFamilyName,
                            _IMCreateEscapedAttributeValueFromString,
                            _IMCreateEscapedStringFromString,
                            _IMCreateSuperFormatStringWithAppendedFileTransfers,
                            _IMDFileTransferAcceptedNotification,
                            _IMDFileTransferHighQualityDownloadCompletedFileURLKey,
                            _IMDFileTransferHighQualityDownloadCompletedNotification,
                            _IMDFileTransferHighQualityDownloadCompletedSuccessKey,
                            _IMDFileTransferHighQualityDownloadInitiatedNotification,
                            _IMDMessageHistorySyncNotifyCKChatSyncControllerWantsSync,
                            _IMDataDetectorResultAttributeName,
                            _IMDispatchForNotify,
                            _IMExtensionPayloadAlternateTextKey,
                            _IMExtensionPayloadUnarchivingClasses,
                            _IMFileBookmarkAttributeName,
                            _IMFileTransferAVTranscodeOptionCheckForAnimojiV2,
                            _IMFileTransferAVTranscodeOptionRemoveAlpha,
                            _IMFileTransferGUIDAttributeName,
                            _IMFilenameAttributeName, _IMFontFamilyAttributeName,
                            _IMFontSizeAttributeName,
                            _IMForegroundColorAttributeName,
                            _IMFullScreenMomentID,
                            _IMGetAttributedInfoArrayWhitelistedClasses,
                            _IMGetCachedDomainBoolForKey,
                            _IMGetCachedDomainIntForKeyWithDefaultValue,
                            _IMGetCachedDomainValueForKey,
                            _IMGetConsumedSessionPayloadsForBreadcrumbItems,
                            _IMGetDomainBoolForKey,
                            _IMGetDomainBoolForKeyWithDefaultValue,
                            _IMGetDomainValueForKey, _IMGetiMessageSettings,
                            _IMGreenTeaPhoneNumberTransmitLog,
                            _IMHighQualityFilePathVariant,
                            _IMImpactEffectID_InvisibleInk,
                            _IMInlineMediaHeightAttributeName,
                            _IMInlineMediaWidthAttributeName,
                            _IMIsRunningInAutomation, _IMIsRunningInUnitTesting,
                            _IMItalicAttributeName, _IMLinkAttributeName,
                            _IMLogBacktrace, _IMLogSimulateCrashForException,
                            _IMLogString, _IMMessageBackgroundColorAttributeName,
                            _IMMessageForegroundColorAttributeName,
                            _IMMessagePartAttributeName,
                            _IMMessageSummaryInfoHasBeenRetried,
                            _IMMessageSummaryInfoUpdatedDateWithServerTime,
                            _IMMetricsCollectorEventAcknowledgementSent,
                            _IMMetricsCollectorEventCallerIDSwitched,
                            _IMMetricsCollectorEventInternationalSpam,
                            _IMMetricsCollectorEventMeStickerSent,
                            _IMMetricsCollectorEventStickerSent,
                            _IMMetricsCollectorEventStickerSentUsingFastPath,
                            _IMMetricsCollectorEventiMessageReceived,
                            _IMMetricsCollectorEventiMessageSent,
                            _IMMyNameAttributeName, _IMOSLoggingEnabled,
                            _IMPeerAttachmentMessageErrorDomain,
                            _IMPostingMissingMessageData, _IMPreferredAccountMap,
                            _IMPreformattedAttributeName,
                            _IMRecievedMissingMessageNotification,
                            _IMReferencedHandleAttributeName,
                            _IMSMSFallbackEnabled, _IMSearchTermAttributeName,
                            _IMSendAdditionalMMCSErrorInfoToMadrid,
                            _IMServiceNameForCanonicalIDSAddresses,
                            _IMSetDomainBoolForKey, _IMSetDomainValueForKey,
                            _IMSettingsKeepMessagesChangedNotification,
                            _IMSettingsKeepMessagesDomain,
                            _IMSettingsKeepMessagesKey,
                            _IMSettingsKeepMessagesPrefShouldUpdateNotification,
                            _IMSettingsKeepMessagesResetKey,
                            _IMSettingsKeepMessagesShouldResetPrefNotification,
                            _IMSettingsKeepMessagesVersionIDKey,
                            _IMSettingsKeepMessagesWasResetNotification,
                            _IMSharedHelperAppBlackListed,
                            _IMSharedHelperCombinedPluginPayloadDictionaryData,
                            _IMSharedHelperCombinedPluginPayloadDictionaryDataWithAttachmentURLs,
                            _IMSharedHelperDeviceHasMultipleSubscriptions,
                            _IMSharedHelperEnsureDirectoryExistsAtPath,
                            _IMSharedHelperExtractPayloadURL,
                            _IMSharedHelperIsUnderAutomation,
                            _IMSharedHelperMD5HashOfFileAtPath,
                            _IMSharedHelperMD5HashPlist,
                            _IMSharedHelperMD5OfData,
                            _IMSharedHelperNickNameEnabled,
                            _IMSharedHelperPayloadFromCombinedPluginPayloadData,
                            _IMSharedHelperReplaceExtensionPayloadDataWithFilePathForMessage,
                            _IMSharedHelperReplaceFilePathWithExtensionPayloadDataForMessage,
                            _IMSharedHelperRetryTimeout,
                            _IMSharedHelperShouldAdjustTimestampOfResentMessages,
                            _IMShouldLog, _IMSingleObjectArray,
                            _IMSmileyDescriptionAttributeName,
                            _IMSmileyLengthAttributeName,
                            _IMSmileySpeechDescriptionAttributeName,
                            _IMStickerUserInfoAssociatedLayoutIntentKey,
                            _IMStickerUserInfoLayoutIntentKey,
                            _IMStickerUserInfoParentPreviewWidthKey,
                            _IMStickerUserInfoRotationKey,
                            _IMStickerUserInfoScaleKey,
                            _IMStickerUserInfoStickerBIDKey,
                            _IMStickerUserInfoStickerGUIDKey,
                            _IMStickerUserInfoStickerHashKey,
                            _IMStickerUserInfoStickerPackGUIDKey,
                            _IMStickerUserInfoStickerRecipeKey,
                            _IMStickerUserInfoStickerTranscodedStickerHashKey,
                            _IMStickerUserInfoTranscodedScaleKey,
                            _IMStickerUserInfoXScalarKey,
                            _IMStickerUserInfoYScalarKey,
                            _IMStrikethroughAttributeName, _IMStringIsBusinessID,
                            _IMStringIsEmail, _IMTimingStartTimingForKey,
                            _IMTimingStopTimingForKey, _IMTranscodeErrorDomain,
                            _IMTranscoderAdditionalContextScaleFactorKey,
                            _IMUnderlineAttributeName,
                            _IMUniqueSmileyNumberAttributeName,
                            _IMWeakLinkSymbol, _IMiMessageMaxFileSizeForUTI,
                            _IMiMessageShouldSendLowResolutionOnly,
                            _IMiMessageSizeLimitsForTransferType,
                            _JWDecodeDictionary, _JWEncodeDictionary,
                            _JWUUIDPushObjectToString, _MarcoAction,
                            _MarcoLogMadridEvent, _MarcoLogMadridLevel,
                            _MarcoLoggingStringForMessageData,
                            _MarcoShouldLogMadridLevel, _MarcoWarnMadrid,
                            _MessageDictionaryMeCardSharingAudienceKey,
                            _MessageDictionaryMeCardSharingEnabledKey,
                            _MessageDictionaryMeCardSharingImageForkedKey,
                            _MessageDictionaryMeCardSharingNameForkedKey,
                            _MessageDictionaryNicknameBlacklistKey,
                            _MessageDictionaryNicknameBlacklistWhitelistVersionKey,
                            _MessageDictionaryNicknameParticipantTruncatedRIDKey,
                            _MessageDictionaryNicknameWhitelistKey,
                            _MessageDictionaryPersonalNicknameDecryptKeyKey,
                            _MessageDictionaryPersonalNicknameRecordIDKey,
                            _MessageLogEvent, _MessageLogStatistic,
                            _NSFileProtectionCompleteUntilFirstUserAuthentication,
                            _NSFileProtectionKey, _NSFileSize,
                            _NSFileSystemFreeSize, _NSHomeDirectory,
                            _NSKeyedArchiveRootObjectKey, _NSStringFromClass,
                            _NSStringFromRange, _NSStringFromSelector,
                            _NSTemporaryDirectory, _NSURLErrorDomain,
                            _NSUnderlyingErrorKey, _OBJC_EHTYPE_$_NSException,
                            _OSLogHandleForIDSCategory,
                            _OSLogHandleForIMEventCategory,
                            _OSLogHandleForIMFoundationCategory,
                            _UTTypeConformsTo, __Block_copy, __Block_object_assign,
                            __Block_object_dispose, __Block_release,
                            __FZErrorTypeFromNSError,
                            __FZErrorTypeFromResponseCodeAndError,
                            __IDSiMessageProtocolVersionNumber, __IMAlwaysLog,
                            __IMWarn, __IMWillLog, __MessageGUIDToSignpostId,
                            __NSConcreteGlobalBlock, __NSConcreteStackBlock,
                            __Unwind_Resume, ___CFConstantStringClassReference,
                            ___NSArray0__, ___NSDictionary0__,
                            ___objc_personality_v0, ___stack_chk_fail,
                            ___stack_chk_guard, __dispatch_main_q,
                            __iMessageTelemetryLogHandle, __objc_empty_cache,
                            __os_log_fault_impl, __os_log_impl,
                            __os_signpost_emit_with_name_impl, _dispatch_after,
                            _dispatch_async, _dispatch_group_create,
                            _dispatch_group_enter, _dispatch_group_leave,
                            _dispatch_group_notify, _dispatch_once,
                            _dispatch_release, _dispatch_time, _im_dispatch_after,
                            _kAttachmentsAutomationAdditionalErrorInfoKey,
                            _kAttachmentsAutomationErrorKey,
                            _kAttachmentsAutomationFileSizeKey,
                            _kAttachmentsAutomationMessageGUIDKey,
                            _kAttachmentsAutomationMilestoneBeginReceivingMessage,
                            _kAttachmentsAutomationMilestoneBeginReceivingURL,
                            _kAttachmentsAutomationMilestoneBeginSendingMessage,
                            _kAttachmentsAutomationMilestoneBeginSendingURL,
                            _kAttachmentsAutomationMilestoneEndReceivingMessage,
                            _kAttachmentsAutomationMilestoneEndReceivingURL,
                            _kAttachmentsAutomationMilestoneEndSendingMessage,
                            _kAttachmentsAutomationMilestoneEndSendingURL,
                            _kAttachmentsAutomationSuccessKey,
                            _kAttachmentsAutomationTransferGUIDKey,
                            _kAttachmentsAutomationTransferGUIDsKey,
                            _kAttachmentsAutomationURLKey,
                            _kCFTypeDictionaryKeyCallBacks,
                            _kCFTypeDictionaryValueCallBacks,
                            _kFZChatParticipantStatusKey,
                            _kFZListenerCapBlackholedChatRegistry,
                            _kFZListenerCapChats, _kFZPersonCountryCode,
                            _kFZPersonID, _kFZPersonUnformattedName,
                            _kFZServiceDefaultsSentinelAlias,
                            _kIDSServiceDefaultsSentinelAlias,
                            _kIMMessageItemHideLockScreenNotificationsKey,
                            _kIMRecentItemsListUpdatedNotification,
                            _kStickerTransferInfoPlistFileFolder,
                            _kUTTypeAudiovisualContent, _kUTTypeImage,
                            _kUTTypeMovie, _kdebug_trace, _notify_cancel,
                            _notify_post, _objc_alloc, _objc_alloc_init,
                            _objc_autorelease, _objc_autoreleasePoolPop,
                            _objc_autoreleasePoolPush, _objc_begin_catch,
                            _objc_destroyWeak, _objc_end_catch,
                            _objc_enumerationMutation, _objc_getProperty,
                            _objc_loadWeak, _objc_msgSend, _objc_msgSendSuper2,
                            _objc_opt_class, _objc_opt_isKindOfClass,
                            _objc_opt_respondsToSelector, _objc_release,
                            _objc_retain, _objc_setProperty_atomic,
                            _objc_setProperty_atomic_copy,
                            _objc_setProperty_nonatomic,
                            _objc_setProperty_nonatomic_copy, _objc_storeWeak,
                            _os_log_shim_legacy_logging_enabled,
                            _os_log_type_enabled, _os_signpost_enabled,
                            _os_signpost_id_make_with_pointer ]
    objc-classes:         [ _ENStableGroupID, _FTMessageDelivery,
                            _FTNetworkSupport, _FTUserConfiguration, _IDSAccount,
                            _IDSIDQueryController, _IDSMessage, _IDSMessageContext,
                            _IDSServerBag, _IDSService,
                            _IDSTransactionLogDictionaryMessage,
                            _IDSTransactionLogMessage, _IMAssociatedMessageItem,
                            _IMAttributedStringParser, _IMCTSMSUtilities,
                            _IMCTSubscriptionUtilities,
                            _IMCoreAutomationNotifications, _IMDAccount,
                            _IMDAccountController, _IMDAppleServiceSession,
                            _IMDAttachmentStore, _IMDCKAttachmentSyncController,
                            _IMDCKExitManager, _IMDCKSyncController,
                            _IMDCKUtilities, _IMDChatRegistry, _IMDChatStore,
                            _IMDFileTransferCenter, _IMDIDSAccount,
                            _IMDLocationSharingController, _IMDMessageStore,
                            _IMDNicknameController, _IMDServiceController,
                            _IMDStickerRegistry, _IMDefaults, _IMFeatureFlags,
                            _IMFileManager, _IMFileTransfer,
                            _IMFromSuperParserContext, _IMGroupBlacklistManager,
                            _IMHTMLToSuperParserContext, _IMLockdownManager,
                            _IMMessageItem, _IMMessageNotificationTimeManager,
                            _IMMetricsCollector, _IMMobileNetworkManager,
                            _IMMultiQueue, _IMNetworkAvailability,
                            _IMPowerAssertion, _IMRGLog, _IMRecentItemsList,
                            _IMSpamFilterHelper, _IMSystemMonitor, _IMTimer,
                            _IMTimingCollection, _IMToSuperParserFrame,
                            _IMTranscodeController,
                            _IMTransferServicesCompressionController,
                            _IMTransferServicesController, _IMUnarchiverDecoder,
                            _IMUserDefaults, _IMUserNotification,
                            _IMUserNotificationCenter, _IMXMLParser, _NSArray,
                            _NSAttributedString, _NSBundle, _NSCalendar,
                            _NSCharacterSet, _NSData, _NSDate, _NSDateComponents,
                            _NSDictionary, _NSError, _NSFileCoordinator,
                            _NSFileManager, _NSKeyedArchiver, _NSKeyedUnarchiver,
                            _NSMutableArray, _NSMutableAttributedString,
                            _NSMutableDictionary, _NSMutableSet, _NSMutableString,
                            _NSNotificationCenter, _NSNull, _NSNumber, _NSObject,
                            _NSSet, _NSString, _NSThread, _NSURL, _NSUUID, _NSValue,
                            _NetworkChangeNotifier ]
...
