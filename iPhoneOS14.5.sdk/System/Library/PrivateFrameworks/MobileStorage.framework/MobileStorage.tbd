--- !tapi-tbd-v3
archs:                 [ armv7, armv7s, arm64, arm64e ]
platform:              ios
flags:                 [ flat_namespace ]
install-name:          /System/Library/PrivateFrameworks/MobileStorage.framework/MobileStorage
current-version:       1
compatibility-version: 1
objc-constraint:       retain_release
exports:
  - archs:                [ armv7, armv7s, arm64, arm64e ]
    symbols:              [ _MobileStorageCopyAndFixPlist,
                            _MobileStorageCopyCryptexNonceWithError,
                            _MobileStorageCopyDevices,
                            _MobileStorageCopyDevicesWithError,
                            _MobileStorageCopyPersonalizationNonceWithError,
                            _MobileStorageMount,
                            _MobileStorageMountPersonalizedBundleWithError,
                            _MobileStorageMountWithError,
                            _MobileStorageRemoteCopyCryptexNonceWithError,
                            _MobileStorageRemoteCopyDevicesWithError,
                            _MobileStorageRemoteCopyMountedImageSignaturesWithError,
                            _MobileStorageRemoteCopyPersonalizationNonceWithError,
                            _MobileStorageRemoteMountPersonalizedBundleWithError,
                            _MobileStorageRemoteMountWithError,
                            _MobileStorageRemoteRollCryptexNonceWithError,
                            _MobileStorageRemoteRollPersonalizationNonceWithError,
                            _MobileStorageRemoteUnmountWithError,
                            _MobileStorageRollCryptexNonceWithError,
                            _MobileStorageRollPersonalizationNonceWithError,
                            _MobileStorageSync, _MobileStorageSyncWithError,
                            _MobileStorageUnmount,
                            _MobileStorageUnmountWithError,
                            _kDiskImageMountPathKey,
                            _kDiskImageMountedNotification, _kMSMBackingImage,
                            _kMSMDiskImagePersonalizedImageType,
                            _kMSMDiskImageTypeCryptex,
                            _kMSMDiskImageTypeDeveloper, _kMSMDiskImageTypeKey,
                            _kMSMDiskImageTypePersonalized,
                            _kMSMDiskImageTypePersonalizedAutomation,
                            _kMSMDiskImageTypePersonalizedDebug,
                            _kMSMDiskImageTypePersonalizedDemo,
                            _kMSMDiskImageTypePersonalizedDeveloper,
                            _kMSMDiskImageTypePersonalizedFactory,
                            _kMSMDiskImageTypePersonalizedFieldService,
                            _kMSMDiskImageTypePersonalizedFieldServiceDiagnostic,
                            _kMSMDiskImageTypePersonalizedFieldServiceRepair,
                            _kMSMDiskImageTypePersonalizedProdAutomation,
                            _kMSMDiskImageTypeSystemDeveloper,
                            _kMSMImageInfoPlistKey, _kMSMImageTrustCacheKey,
                            _kMSMPerformLosslessQuery,
                            _kMSMPersonalizationImageURL,
                            _kMSMPersonalizationMountedBundleURL,
                            _kMSMPersonalizationSigningServerURL,
                            _kMSMPersonalizationUseCredentials,
                            _kMSMPersonalizationUseCryptexFlow,
                            _kMSMSignatureKey, _kMassStorageMountedNotification,
                            _kMassStorageUnmountedNotification,
                            _kMobileStorageDeviceNodeKey,
                            _kMobileStorageDeviceTypeDiskImage,
                            _kMobileStorageDeviceTypeKey,
                            _kMobileStorageDeviceTypeMassStorage,
                            _kMobileStorageDeviceTypePTPCamera,
                            _kMobileStorageFilesystemTypeKey,
                            _kMobileStorageIsMountedKey,
                            _kMobileStorageIsReadOnlyKey,
                            _kMobileStorageMountPathKey,
                            _kMobileStorageSignatureKey,
                            _kMobileStorageSupportsContentProtection,
                            _kPTPCameraAttachedNotification,
                            _kStorageMounterName ]
    objc-classes:         [ PersonalizedImage, PlistProcessor ]
    objc-ivars:           [ PersonalizedImage._apNonce,
                            PersonalizedImage._boardID,
                            PersonalizedImage._bundlePathURL,
                            PersonalizedImage._certificateProductionStatus,
                            PersonalizedImage._certificateSecurityMode,
                            PersonalizedImage._chipID,
                            PersonalizedImage._deviceClass,
                            PersonalizedImage._digestLength,
                            PersonalizedImage._ecid,
                            PersonalizedImage._effectiveProductionStatus,
                            PersonalizedImage._effectiveSecurityMode,
                            PersonalizedImage._hardwareModel,
                            PersonalizedImage._image4Supported,
                            PersonalizedImage._imagePathURL,
                            PersonalizedImage._imageType,
                            PersonalizedImage._imageVariant,
                            PersonalizedImage._mountedVolumeEntry,
                            PersonalizedImage._remoteDevice,
                            PersonalizedImage._securityDomain,
                            PersonalizedImage._sepNonce,
                            PersonalizedImage._signingServerURL,
                            PersonalizedImage._skipLoadingLaunchDaemons,
                            PersonalizedImage._trustCacheURL,
                            PersonalizedImage._useCredentials,
                            PersonalizedImage._userProvidedBundleMountPathURL,
                            PersonalizedImage._userProvidedImagePathURL ]
undefineds:
  - archs:                [ armv7, armv7s, arm64, arm64e ]
    symbols:              [ _AMAuthInstallCreate, _AMAuthInstallLogSetHandler,
                            _AMAuthInstallRequestSendSync,
                            _AMAuthInstallSetSigningServerURL,
                            _AMAuthInstallSsoEnable, _AMAuthInstallSsoInitialize,
                            _CC_SHA1_Final, _CC_SHA1_Init, _CC_SHA1_Update,
                            _CC_SHA384_Final, _CC_SHA384_Init, _CC_SHA384_Update,
                            _CFDataCreate, _CFDataGetBytePtr, _CFDataGetLength,
                            _CFDictionaryCreateMutable, _CFDictionaryGetValue,
                            _CFDictionarySetValue, _CFEqual, _CFGetTypeID,
                            _CFPropertyListCreateData,
                            _CFPropertyListCreateWithData, _CFRelease, _CFRetain,
                            _CFStringCompare, _CFStringGetTypeID,
                            _IOBSDNameMatching, _IOIteratorNext,
                            _IOObjectConformsTo, _IOObjectRelease, _IOObjectRetain,
                            _IORegistryEntryCreateCFProperties,
                            _IORegistryEntryCreateCFProperty,
                            _IORegistryEntryGetParentEntry,
                            _IORegistryEntrySearchCFProperty,
                            _IOServiceGetMatchingService,
                            _IOServiceGetMatchingServices, _IOServiceMatching,
                            _MGCopyAnswer, _NSFilePosixPermissions, _NSFileSize,
                            _NSLocalizedDescriptionKey, _NSUnderlyingErrorKey,
                            __Block_object_assign, __Block_object_dispose,
                            __CFXPCCreateCFObjectFromXPCObject,
                            __CFXPCCreateXPCObjectFromCFObject,
                            __NSConcreteGlobalBlock, __NSConcreteStackBlock,
                            __Unwind_Resume, ___CFConstantStringClassReference,
                            ___chkstk_darwin, ___error, ___kCFBooleanFalse,
                            ___kCFBooleanTrue, ___objc_personality_v0,
                            ___stack_chk_fail, ___stack_chk_guard, ___strlcpy_chk,
                            __objc_empty_cache, __os_log_debug_impl,
                            __os_log_default, __os_log_impl,
                            __xpc_error_connection_invalid,
                            __xpc_error_key_description, __xpc_type_dictionary,
                            __xpc_type_error, __xpc_type_uint64, _bzero, _close,
                            _cryptex_copy_list_4MSM, _cryptex_msm_array_destroy,
                            _cryptex_msm_get_string, _dispatch_get_global_queue,
                            _dispatch_once, _dispatch_semaphore_create, _free,
                            _getfsstat, _getpid,
                            _kAMAuthInstallBuildIdentityPersonalizedDMG,
                            _kAMAuthInstallTagApBoardId,
                            _kAMAuthInstallTagApChipId, _kAMAuthInstallTagApEcid,
                            _kAMAuthInstallTagApImg4Ticket,
                            _kAMAuthInstallTagApNonce,
                            _kAMAuthInstallTagApProductionMode,
                            _kAMAuthInstallTagApRequestImg4Ticket,
                            _kAMAuthInstallTagApSecurityDomain,
                            _kAMAuthInstallTagApSecurityMode,
                            _kAMAuthInstallTagApSepNonce,
                            _kAMAuthInstallTagImageDigest,
                            _kAMAuthInstallTagImageEffectiveProductionMode,
                            _kAMAuthInstallTagImageEffectiveSecurityMode,
                            _kAMAuthInstallTagImageName,
                            _kAMAuthInstallTagImageTrusted, _kCFAllocatorDefault,
                            _kCFBooleanTrue, _kCFTypeDictionaryKeyCallBacks,
                            _kCFTypeDictionaryValueCallBacks,
                            _kIOMasterPortDefault, _lchflags, _lstat, _malloc,
                            _objc_alloc, _objc_alloc_init, _objc_autorelease,
                            _objc_autoreleasePoolPop, _objc_autoreleasePoolPush,
                            _objc_autoreleaseReturnValue,
                            _objc_enumerationMutation, _objc_getProperty,
                            _objc_msgSend, _objc_msgSendSuper2, _objc_opt_class,
                            _objc_opt_isKindOfClass, _objc_release, _objc_retain,
                            _objc_retainAutorelease,
                            _objc_retainAutoreleaseReturnValue,
                            _objc_retainAutoreleasedReturnValue,
                            _objc_setProperty_nonatomic_copy, _objc_storeStrong,
                            _open, _os_log_type_enabled,
                            _os_variant_allows_internal_security_policies,
                            _proc_pidpath, _read, _realpath$DARWIN_EXTSN,
                            _remote_device_copy_property,
                            _remote_device_copy_service,
                            _remote_device_get_state, _removefile,
                            _removefile_state_alloc, _removefile_state_free,
                            _removefile_state_get, _removefile_state_set, _strcmp,
                            _strerror, _strlen, _strncmp, _strnstr, _strtol, _unlink,
                            _xpc_connection_cancel,
                            _xpc_connection_create_mach_service,
                            _xpc_connection_resume,
                            _xpc_connection_send_message_with_reply_sync,
                            _xpc_connection_set_event_handler,
                            _xpc_copy_description, _xpc_dictionary_create,
                            _xpc_dictionary_get_data, _xpc_dictionary_get_string,
                            _xpc_dictionary_set_data, _xpc_dictionary_set_value,
                            _xpc_file_transfer_create_with_path, _xpc_get_type,
                            _xpc_remote_connection_activate,
                            _xpc_remote_connection_create_with_remote_service,
                            _xpc_remote_connection_send_message_with_reply_sync,
                            _xpc_remote_connection_set_event_handler,
                            _xpc_uint64_get_value, dyld_stub_binder ]
    objc-classes:         [ DiskImages2, NSArray, NSCharacterSet,
                            NSConstantIntegerNumber, NSData, NSDictionary, NSError,
                            NSFileHandle, NSFileManager, NSMutableArray,
                            NSMutableData, NSMutableDictionary, NSMutableString,
                            NSNumber, NSObject, NSScanner, NSString, NSURL, NSUUID ]
...
